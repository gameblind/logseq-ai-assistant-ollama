<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logseq MCP Bridge Service - é…ç½®ç®¡ç†</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            text-align: center;
        }

        .header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.1em;
        }

        .status-bar {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }

        .status-card {
            flex: 1;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }

        .status-card h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .status-value {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }

        .status-online {
            color: #27ae60;
        }

        .status-offline {
            color: #e74c3c;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .panel {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .panel-header {
            background: #3498db;
            color: white;
            padding: 20px;
            font-size: 1.2em;
            font-weight: bold;
        }

        .panel-content {
            padding: 20px;
        }

        .service-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .service-item {
            border: 1px solid #ecf0f1;
            border-radius: 8px;
            margin-bottom: 15px;
            padding: 15px;
            transition: all 0.3s ease;
        }

        .service-item:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .service-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .service-name {
            font-weight: bold;
            color: #2c3e50;
        }

        .service-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
            text-transform: uppercase;
        }

        .status-connected {
            background: #d5f4e6;
            color: #27ae60;
        }

        .status-disconnected {
            background: #fadbd8;
            color: #e74c3c;
        }

        .status-disabled {
            background: #f8f9fa;
            color: #6c757d;
        }

        .service-description {
            color: #7f8c8d;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .service-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-success:hover {
            background: #229954;
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #2c3e50;
        }

        .form-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1em;
        }

        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1em;
            background: white;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
        }

        .error {
            background: #fadbd8;
            color: #e74c3c;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }

        .success {
            background: #d5f4e6;
            color: #27ae60;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #ecf0f1;
        }

        .modal-title {
            font-size: 1.5em;
            color: #2c3e50;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: #7f8c8d;
        }

        .close-btn:hover {
            color: #2c3e50;
        }

        /* æ ‡ç­¾é¡µæ ·å¼ */
        .nav-tabs {
            display: flex;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            overflow: hidden;
        }

        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 1em;
            font-weight: 500;
            color: #7f8c8d;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .nav-tab:hover {
            background: #f8f9fa;
            color: #2c3e50;
        }

        .nav-tab.active {
            color: #3498db;
            background: #f8f9fa;
            border-bottom-color: #3498db;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* ä»»åŠ¡çŠ¶æ€é¡µé¢æ ·å¼ */
        #tasks-list {
            max-height: 600px;
            overflow-y: auto;
        }

        .task-item {
            border: 1px solid #ecf0f1;
            border-radius: 8px;
            margin-bottom: 15px;
            padding: 15px;
            transition: all 0.3s ease;
        }

        .task-item:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .task-id {
            font-weight: bold;
            color: #2c3e50;
            font-family: monospace;
        }

        .task-type {
            color: #7f8c8d;
            font-size: 0.9em;
            margin-left: 10px;
        }

        .task-details {
            color: #7f8c8d;
            font-size: 0.9em;
            line-height: 1.4;
        }

        .task-error {
            color: #e74c3c;
            background: #fadbd8;
            padding: 8px;
            border-radius: 4px;
            margin-top: 8px;
            font-size: 0.9em;
        }

        /* é…ç½®é¡µé¢æ ·å¼ */
        .config-section {
            margin-bottom: 40px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }

        .config-section-title {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            font-weight: 600;
        }

        .form-help {
            display: block;
            margin-top: 5px;
            font-size: 0.85em;
            color: #7f8c8d;
            font-style: italic;
        }

        .config-form {
            max-width: 800px;
        }

        /* å¯†ç å­—æ®µæ˜¾ç¤ºåˆ‡æ¢ */
        .password-field {
            position: relative;
        }

        .password-toggle {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            color: #7f8c8d;
            font-size: 0.9em;
        }

        .password-toggle:hover {
            color: #3498db;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .status-bar {
                flex-direction: column;
            }

            .nav-tabs {
                flex-direction: column;
            }

            .nav-tab {
                border-bottom: 1px solid #ecf0f1;
                border-left: 3px solid transparent;
            }

            .nav-tab.active {
                border-left-color: #3498db;
                border-bottom-color: transparent;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”— Logseq MCP Bridge Service</h1>
            <p>Model Context Protocol æ¡¥æ¥æœåŠ¡ç®¡ç†ç•Œé¢</p>
        </div>

        <div class="status-bar">
            <div class="status-card">
                <h3>æœåŠ¡çŠ¶æ€</h3>
                <div class="status-value" id="server-status">æ£€æŸ¥ä¸­...</div>
            </div>
            <div class="status-card">
                <h3>å·²è¿æ¥æœåŠ¡</h3>
                <div class="status-value" id="connected-count">0</div>
            </div>
            <div class="status-card">
                <h3>å¯ç”¨å·¥å…·</h3>
                <div class="status-value" id="tools-count">0</div>
            </div>
            <div class="status-card">
                <h3>è¿è¡Œæ—¶é—´</h3>
                <div class="status-value" id="uptime">0s</div>
            </div>
        </div>

        <!-- å¯¼èˆªæ ‡ç­¾ -->
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('services')">ğŸ“‹ MCP æœåŠ¡</button>
            <button class="nav-tab" onclick="showTab('tools')">ğŸ› ï¸ å·¥å…·åˆ—è¡¨</button>
            <button class="nav-tab" onclick="showTab('config')">âš™ï¸ API é…ç½®</button>
            <button class="nav-tab" onclick="showTab('tasks')">ğŸ“Š ä»»åŠ¡çŠ¶æ€</button>
        </div>

        <!-- æœåŠ¡ç®¡ç†æ ‡ç­¾é¡µ -->
        <div id="services-tab" class="tab-content active">
            <div class="main-content">
                <div class="panel">
                    <div class="panel-header">
                        ğŸ“‹ MCP æœåŠ¡åˆ—è¡¨
                        <button class="btn btn-success" onclick="showAddServiceModal()" style="float: right;">+ æ·»åŠ æœåŠ¡</button>
                    </div>
                    <div class="panel-content">
                        <div id="services-loading" class="loading">æ­£åœ¨åŠ è½½æœåŠ¡åˆ—è¡¨...</div>
                        <div id="services-error" class="error" style="display: none;"></div>
                        <div id="services-list" class="service-list"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- å·¥å…·åˆ—è¡¨æ ‡ç­¾é¡µ -->
        <div id="tools-tab" class="tab-content">
            <div class="main-content">
                <div class="panel">
                    <div class="panel-header">
                        ğŸ› ï¸ å¯ç”¨å·¥å…·
                    </div>
                    <div class="panel-content">
                        <div id="tools-loading" class="loading">æ­£åœ¨åŠ è½½å·¥å…·åˆ—è¡¨...</div>
                        <div id="tools-error" class="error" style="display: none;"></div>
                        <div id="tools-list"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- API é…ç½®æ ‡ç­¾é¡µ -->
        <div id="config-tab" class="tab-content">
            <div class="main-content">
                <div class="panel">
                    <div class="panel-header">
                        âš™ï¸ API é…ç½®ç®¡ç†
                        <button class="btn btn-primary" onclick="saveApiConfig()" style="float: right;">ğŸ’¾ ä¿å­˜é…ç½®</button>
                    </div>
                    <div class="panel-content">
                        <div id="config-loading" class="loading">æ­£åœ¨åŠ è½½é…ç½®...</div>
                        <div id="config-error" class="error" style="display: none;"></div>
                        <div id="config-success" class="success" style="display: none;"></div>
                        
                        <div id="config-form" style="display: none;">
                            <!-- å›¾åƒç”Ÿæˆ API é…ç½® -->
                            <div class="config-section">
                                <h3 class="config-section-title">ğŸ¨ å›¾åƒç”Ÿæˆ API</h3>
                                <div class="form-group">
                                    <label class="form-label">API åœ°å€</label>
                                    <input type="url" class="form-input" id="image-api-address" placeholder="https://api.example.com">
                                    <small class="form-help">å›¾åƒç”ŸæˆæœåŠ¡çš„APIåœ°å€</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">API å¯†é’¥</label>
                                    <input type="text" class="form-input" id="image-api-key" placeholder="sk-...">
                                    <small class="form-help">å›¾åƒç”ŸæˆæœåŠ¡çš„APIå¯†é’¥</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">å›¾åƒç”Ÿæˆæ¨¡å‹</label>
                                    <select class="form-select" id="image-model">
                                        <option value="qwen-image">Qwen Image</option>
                                        <option value="dall-e-3">DALL-E 3</option>
                                    </select>
                                    <small class="form-help">ç”¨äºæ–‡ç”Ÿå›¾å’Œå›¾ç”Ÿå›¾çš„æ¨¡å‹</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">å›¾åƒç¼–è¾‘æ¨¡å‹</label>
                                    <select class="form-select" id="image-edit-model">
                                        <option value="qwen-image-edit">Qwen Image Edit</option>
                                        <option value="gpt-image-1">GPT Image 1</option>
                                        <option value="dall-e-2">DALL-E 2</option>
                                    </select>
                                    <small class="form-help">ç”¨äºå›¾åƒç¼–è¾‘çš„æ¨¡å‹</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">ç¼–è¾‘è´¨é‡</label>
                                    <select class="form-select" id="image-edit-quality">
                                        <option value="auto">è‡ªåŠ¨</option>
                                        <option value="high">é«˜è´¨é‡</option>
                                        <option value="medium">ä¸­ç­‰è´¨é‡</option>
                                        <option value="low">ä½è´¨é‡</option>
                                    </select>
                                    <small class="form-help">å›¾åƒç¼–è¾‘çš„è´¨é‡è®¾ç½®ï¼ˆä»…gpt-image-1æ”¯æŒï¼‰</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">å“åº”æ ¼å¼</label>
                                    <select class="form-select" id="image-edit-response-format">
                                        <option value="b64_json">Base64 JSON</option>
                                        <option value="url">URL</option>
                                    </select>
                                    <small class="form-help">ç¼–è¾‘åå›¾åƒçš„è¿”å›æ ¼å¼</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">å›¾åƒå°ºå¯¸</label>
                                    <select class="form-select" id="image-edit-size">
                                        <option value="auto">è‡ªåŠ¨</option>
                                        <option value="1024x1024">1024x1024</option>
                                        <option value="1536x1024">1536x1024</option>
                                        <option value="1024x1536">1024x1536</option>
                                    </select>
                                    <small class="form-help">ç¼–è¾‘åå›¾åƒçš„å°ºå¯¸</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">ç”Ÿæˆæ•°é‡</label>
                                    <select class="form-select" id="image-edit-count">
                                        <option value="1">1å¼ </option>
                                        <option value="2">2å¼ </option>
                                        <option value="3">3å¼ </option>
                                        <option value="4">4å¼ </option>
                                        <option value="5">5å¼ </option>
                                    </select>
                                    <small class="form-help">ä¸€æ¬¡ç”Ÿæˆçš„å›¾åƒæ•°é‡</small>
                                </div>
                            </div>

                            <!-- TTS API é…ç½® -->
                            <div class="config-section">
                                <h3 class="config-section-title">ğŸ”Š è¯­éŸ³åˆæˆ API</h3>
                                <div class="form-group">
                                    <label class="form-label">API åœ°å€</label>
                                    <input type="url" class="form-input" id="tts-api-address" placeholder="https://api.example.com">
                                    <small class="form-help">è¯­éŸ³åˆæˆæœåŠ¡çš„APIåœ°å€</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">API å¯†é’¥</label>
                                    <input type="text" class="form-input" id="tts-api-key" placeholder="sk-...">
                                    <small class="form-help">è¯­éŸ³åˆæˆæœåŠ¡çš„APIå¯†é’¥</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">TTS æ¨¡å‹</label>
                                    <select class="form-select" id="tts-model">
                                        <option value="tts-1">TTS-1</option>
                                        <option value="tts-1-hd">TTS-1 HD</option>
                                    </select>
                                    <small class="form-help">é€šç”¨TTSæ¨¡å‹é€‰æ‹©</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">TTS è¯­éŸ³</label>
                                    <select class="form-select" id="tts-voice">
                                        <option value="alloy">Alloy</option>
                                        <option value="echo">Echo</option>
                                        <option value="fable">Fable</option>
                                        <option value="onyx">Onyx</option>
                                        <option value="nova">Nova</option>
                                        <option value="shimmer">Shimmer</option>
                                    </select>
                                    <small class="form-help">TTSè¯­éŸ³é€‰æ‹©</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">å“åº”æ ¼å¼</label>
                                    <select class="form-select" id="tts-response-format">
                                        <option value="mp3">MP3</option>
                                        <option value="opus">Opus</option>
                                        <option value="aac">AAC</option>
                                        <option value="flac">FLAC</option>
                                    </select>
                                    <small class="form-help">éŸ³é¢‘æ–‡ä»¶æ ¼å¼</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">è¯­é€Ÿ</label>
                                    <select class="form-select" id="tts-speed">
                                        <option value="0.25">0.25x</option>
                                        <option value="0.5">0.5x</option>
                                        <option value="0.75">0.75x</option>
                                        <option value="1.0">1.0x</option>
                                        <option value="1.25">1.25x</option>
                                        <option value="1.5">1.5x</option>
                                        <option value="1.75">1.75x</option>
                                        <option value="2.0">2.0x</option>
                                        <option value="2.5">2.5x</option>
                                        <option value="3.0">3.0x</option>
                                        <option value="4.0">4.0x</option>
                                    </select>
                                    <small class="form-help">è¯­éŸ³æ’­æ”¾é€Ÿåº¦</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">åƒé—®TTSæ¨¡å‹</label>
                                    <select class="form-select" id="qwen-tts-model">
                                        <option value="cosyvoice-v1">CosyVoice V1</option>
                                        <option value="sambert-zhichu-v1">Sambert Zhichu V1</option>
                                        <option value="sambert-zhiru-v1">Sambert Zhiru V1</option>
                                        <option value="sambert-zhiyan-v1">Sambert Zhiyan V1</option>
                                        <option value="sambert-zhiyue-v1">Sambert Zhiyue V1</option>
                                    </select>
                                    <small class="form-help">åƒé—®TTSæ¨¡å‹é€‰æ‹©</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">åƒé—®TTSè¯­éŸ³</label>
                                    <select class="form-select" id="qwen-tts-voice">
                                        <option value="longwan">é¾™æ¹¾</option>
                                        <option value="longtian">é¾™å¤©</option>
                                        <option value="longxiaochun">é¾™å°æ˜¥</option>
                                        <option value="longxiaoxia">é¾™å°å¤</option>
                                        <option value="longxiaoqiu">é¾™å°ç§‹</option>
                                        <option value="longxiaodong">é¾™å°å†¬</option>
                                        <option value="longfeifei">é¾™é£é£</option>
                                        <option value="longmiaomiao">é¾™è‹—è‹—</option>
                                    </select>
                                    <small class="form-help">åƒé—®TTSè¯­éŸ³è§’è‰²</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">åƒé—®TTSæ ¼å¼</label>
                                    <select class="form-select" id="qwen-tts-format">
                                        <option value="mp3">MP3</option>
                                        <option value="wav">WAV</option>
                                        <option value="pcm">PCM</option>
                                    </select>
                                    <small class="form-help">åƒé—®TTSéŸ³é¢‘æ ¼å¼</small>
                                </div>
                            </div>

                            <!-- DashScope API é…ç½® -->
                            <div class="config-section">
                                <h3 class="config-section-title">ğŸ¯ é˜¿é‡Œäº‘ç™¾ç‚¼ DashScope API</h3>
                                <div class="form-group">
                                    <label class="form-label">API å¯†é’¥</label>
                                    <input type="text" class="form-input" id="dashscope-api-key" placeholder="sk-...">
                                    <small class="form-help">ç”¨äºqwen-image-editç­‰é˜¿é‡Œäº‘ç™¾ç‚¼æœåŠ¡çš„APIå¯†é’¥</small>
                                </div>
                            </div>

                            <!-- å…¶ä»–é…ç½® -->
                            <div class="config-section">
                                <h3 class="config-section-title">ğŸ”§ å…¶ä»–é…ç½®</h3>
                                <div class="form-group">
                                    <label class="form-label">æ—¥å¿—çº§åˆ«</label>
                                    <select class="form-select" id="log-level">
                                        <option value="error">Error</option>
                                        <option value="warn">Warning</option>
                                        <option value="info">Info</option>
                                        <option value="debug">Debug</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">è¯·æ±‚è¶…æ—¶ (ç§’)</label>
                                    <input type="number" class="form-input" id="request-timeout" min="1" max="300" value="30">
                                    <small class="form-help">APIè¯·æ±‚çš„è¶…æ—¶æ—¶é—´</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ä»»åŠ¡çŠ¶æ€æ ‡ç­¾é¡µ -->
        <div id="tasks-tab" class="tab-content">
            <div class="main-content">
                <div class="panel" style="grid-column: 1 / -1;">
                    <div class="panel-header">
                        ğŸ“Š ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€ç›‘æ§
                        <button class="btn btn-primary" onclick="refreshTasks()" style="float: right;">ğŸ”„ åˆ·æ–°</button>
                    </div>
                    <div class="panel-content">
                        <div id="tasks-loading" class="loading">æ­£åœ¨åŠ è½½ä»»åŠ¡çŠ¶æ€...</div>
                        <div id="tasks-error" class="error" style="display: none;"></div>
                        <div id="tasks-content" style="display: none;">
                            <!-- ä»»åŠ¡ç»Ÿè®¡ -->
                            <div class="status-bar" style="margin-bottom: 20px;">
                                <div class="status-card">
                                    <h3>æ€»ä»»åŠ¡æ•°</h3>
                                    <div class="status-value" id="total-tasks">0</div>
                                </div>
                                <div class="status-card">
                                    <h3>è¿›è¡Œä¸­</h3>
                                    <div class="status-value" id="processing-tasks" style="color: #f39c12;">0</div>
                                </div>
                                <div class="status-card">
                                    <h3>å·²å®Œæˆ</h3>
                                    <div class="status-value" id="completed-tasks" style="color: #27ae60;">0</div>
                                </div>
                                <div class="status-card">
                                    <h3>å¤±è´¥</h3>
                                    <div class="status-value" id="failed-tasks" style="color: #e74c3c;">0</div>
                                </div>
                            </div>
                            
                            <!-- ä»»åŠ¡åˆ—è¡¨ -->
                            <div id="tasks-list"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ·»åŠ æœåŠ¡æ¨¡æ€æ¡† -->
    <div id="add-service-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">æ·»åŠ  MCP æœåŠ¡</h2>
                <button class="close-btn" onclick="hideAddServiceModal()">&times;</button>
            </div>
            <form id="add-service-form">
                <div class="form-group">
                    <label class="form-label">æœåŠ¡ ID *</label>
                    <input type="text" class="form-input" name="id" required placeholder="ä¾‹å¦‚: my-search-service">
                </div>
                <div class="form-group">
                    <label class="form-label">æœåŠ¡åç§° *</label>
                    <input type="text" class="form-input" name="name" required placeholder="ä¾‹å¦‚: æœç´¢æœåŠ¡">
                </div>
                <div class="form-group">
                    <label class="form-label">æè¿°</label>
                    <textarea class="form-input form-textarea" name="description" placeholder="æœåŠ¡åŠŸèƒ½æè¿°"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">è¿æ¥ç±»å‹ *</label>
                    <select class="form-select" name="type" required onchange="toggleConnectionFields()">
                        <option value="stdio">Stdio (æœ¬åœ°è¿›ç¨‹)</option>
                        <option value="sse">SSE (Server-Sent Events)</option>
                        <option value="websocket">WebSocket</option>
                    </select>
                </div>
                
                <!-- Stdio é…ç½® -->
                <div id="stdio-config">
                    <div class="form-group">
                        <label class="form-label">å‘½ä»¤ *</label>
                        <input type="text" class="form-input" name="command" placeholder="ä¾‹å¦‚: node">
                    </div>
                    <div class="form-group">
                        <label class="form-label">å‚æ•° (æ¯è¡Œä¸€ä¸ª)</label>
                        <textarea class="form-input" name="args" placeholder="ä¾‹å¦‚:\nserver.js\n--port\n3000"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ç¯å¢ƒå˜é‡ (JSON æ ¼å¼)</label>
                        <textarea class="form-input" name="env" placeholder='{\n  "API_KEY": "your-key",\n  "DEBUG": "true"\n}'></textarea>
                    </div>
                </div>
                
                <!-- URL é…ç½® (SSE/WebSocket) -->
                <div id="url-config" style="display: none;">
                    <div class="form-group">
                        <label class="form-label">æœåŠ¡ URL *</label>
                        <input type="url" class="form-input" name="url" placeholder="ä¾‹å¦‚: http://localhost:3002/mcp">
                    </div>
                    <div class="form-group">
                        <label class="form-label">è¯·æ±‚å¤´ (JSON æ ¼å¼)</label>
                        <textarea class="form-input" name="headers" placeholder='{\n  "Authorization": "Bearer token",\n  "Content-Type": "application/json"\n}'></textarea>
                    </div>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" name="enabled" id="service-enabled" checked>
                    <label for="service-enabled">å¯ç”¨æœåŠ¡</label>
                </div>
                
                <div style="margin-top: 30px; text-align: right;">
                    <button type="button" class="btn btn-secondary" onclick="hideAddServiceModal()">å–æ¶ˆ</button>
                    <button type="submit" class="btn btn-primary">æ·»åŠ æœåŠ¡</button>
                </div>
            </form>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>