# 视频生成命令测试

## /gpt-qwen-t2v 命令测试

### 测试1：基本文生视频
/gpt-qwen-t2v 一只可爱的小猫在花园里玩耍

### 测试2：复杂场景描述
/gpt-qwen-t2v 夕阳西下，海浪轻拍沙滩，一只海鸥在天空中自由飞翔

## /gpt-qwen-query-task 命令测试

### 测试1：直接使用任务ID
/gpt-qwen-query-task b14a91ff-602f-47ca-8254-2a22bfb34e77

### 测试2：从超时消息中提取任务ID
⏰ 视频生成超时，任务ID: b14a91ff-602f-47ca-8254-2a22bfb34e77
💡 请稍后手动查询任务状态
🔍 使用命令: /gpt-qwen-query-task b14a91ff-602f-47ca-8254-2a22bfb34e77

/gpt-qwen-query-task

### 测试3：从任务创建消息中提取
🎬 视频生成任务已创建，任务ID: abc123-def456-ghi789
⏳ 正在生成中，请稍候...

/gpt-qwen-query-task

## 预期行为

### /gpt-qwen-t2v 流程
1. ✅ 显示提示："正在使用Qwen文生视频生成视频..."
2. ✅ 提交任务：调用 DashScope API 创建视频生成任务
3. ✅ 反馈任务：显示任务ID和处理状态
4. ✅ 轮询反馈：每15秒查询一次任务状态，显示进度
5. ✅ 成功处理：生成成功后显示视频地址和预览
6. ✅ 错误处理：超时或失败时提供详细错误信息

### /gpt-qwen-query-task 流程
1. ✅ 任务ID提取：支持多种格式的任务ID提取
2. ✅ 状态查询：调用 DashScope API 查询任务状态
3. ✅ 结果展示：根据任务状态显示相应信息
4. ✅ 错误处理：提供详细的调试信息和错误原因

## 修复内容

### 任务ID提取改进
- ✅ 支持更宽泛的字符集（\w\-）而不仅限于 a-f0-9
- ✅ 支持多种任务ID格式匹配
- ✅ 增强命令参数解析

### 错误处理增强
- ✅ 改进API响应格式检查
- ✅ 提供详细的调试信息
- ✅ 优化超时处理和用户提示